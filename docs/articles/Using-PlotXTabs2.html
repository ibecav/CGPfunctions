<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using PlotXTabs2 • CGPfunctions</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using PlotXTabs2">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-117082388-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117082388-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CGPfunctions</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Using-Plot2WayANOVA.html">Using Plot2WayAnova</a>
    </li>
    <li>
      <a href="../articles/Using-PlotXTabs.html">Using PlotXTabs</a>
    </li>
    <li>
      <a href="../articles/Using-PlotXTabs2.html">Using PlotXTabs2</a>
    </li>
    <li>
      <a href="../articles/Using-newggslopegraph.html">Using newggslopegraph</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ibecav/CGPfunctions">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Using-PlotXTabs2_files/header-attrs-2.1/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Using PlotXTabs2</h1>
                        <h4 class="author">Chuck Powell</h4>
            
            <h4 class="date">2020-01-28</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ibecav/CGPfunctions/blob/master/vignettes/Using-PlotXTabs2.Rmd"><code>vignettes/Using-PlotXTabs2.Rmd</code></a></small>
      <div class="hidden name"><code>Using-PlotXTabs2.Rmd</code></div>

    </div>

    
    
<p>Like <code>PlotXTabs</code> this function is designed to automate and make efficient a relatively common task in some branches of science. The task of cross tabulating and displaying certain nominal and ordinal variables. It makes use of the <code>tidyverse</code> and to achieve those ends and is optimized to work with <code>purrr</code>.</p>
<p>Imagine that you want to take two of the <code>mtcars</code> variables, for example <code>am</code> and <code>cyl</code>, and conduct a cross tabulation, get some basic statistics about whether they are “independent” and then plot it. Since it’s the sort of thing I’m likely to do often seemed like a good candidate for a function. The function should allow us to efficiently repeat across more than two variables at a time. It would be very tedious to execute the command 25 times if I had 1 dependent variables and 25 independent variables.</p>
<p>It provides visually appealing and sensibly labelled charts quickly and efficiently. It does some basic error checking and allows the user some choice as to exact style without having to know any underlying syntax or semantics.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># simplest possible call with the defaults</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="../reference/PlotXTabs2.html">PlotXTabs2</a></span>(</span>
<span id="cb1-3"><a href="#cb1-3"></a>  <span class="dt">data =</span> mtcars,</span>
<span id="cb1-4"><a href="#cb1-4"></a>  <span class="dt">y =</span> am,</span>
<span id="cb1-5"><a href="#cb1-5"></a>  <span class="dt">x =</span>  cyl</span>
<span id="cb1-6"><a href="#cb1-6"></a>)  </span></code></pre></div>
<p><img src="Using-PlotXTabs2_files/figure-html/simple-1.png" width="672"></p>
<div id="important-considerations" class="section level2">
<h2 class="hasAnchor">
<a href="#important-considerations" class="anchor"></a>Important considerations</h2>
<ol style="list-style-type: decimal">
<li>The variables may be <code>bare</code> or quoted text.</li>
<li>By default a simple summary of key frequentist and bayesian information is supplied but this subtitle can be suppressed.</li>
<li>Thanks to <code>ggstatsplot</code> there are a plethora of formatting options.</li>
</ol>
<p>To demonstrate just a few…</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># more complex call</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw"><a href="../reference/PlotXTabs2.html">PlotXTabs2</a></span>(</span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="dt">data =</span> datasets<span class="op">::</span>mtcars,</span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="dt">y =</span> am,</span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="dt">x =</span> cyl,</span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="dt">bf.details =</span> <span class="ot">TRUE</span>,</span>
<span id="cb2-7"><a href="#cb2-7"></a>  <span class="dt">xlab =</span> <span class="st">"Number of cylinders"</span>,</span>
<span id="cb2-8"><a href="#cb2-8"></a>  <span class="dt">ylab =</span> <span class="ot">NULL</span>,</span>
<span id="cb2-9"><a href="#cb2-9"></a>  <span class="dt">data.label =</span> <span class="st">"both"</span>,</span>
<span id="cb2-10"><a href="#cb2-10"></a>  <span class="dt">label.fill.alpha =</span> <span class="fl">.3</span>,</span>
<span id="cb2-11"><a href="#cb2-11"></a>  <span class="dt">labels.legend =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"0 = Manual"</span>, <span class="st">"1 = Automatic"</span>),</span>
<span id="cb2-12"><a href="#cb2-12"></a>  <span class="dt">legend.title =</span> <span class="st">"Transmission Type"</span>,</span>
<span id="cb2-13"><a href="#cb2-13"></a>  <span class="dt">legend.position =</span> <span class="st">"left"</span>,</span>
<span id="cb2-14"><a href="#cb2-14"></a>  <span class="dt">title =</span> <span class="st">"The perenial mtcars example"</span>,</span>
<span id="cb2-15"><a href="#cb2-15"></a>  <span class="dt">palette =</span> <span class="st">"Pastel1"</span></span>
<span id="cb2-16"><a href="#cb2-16"></a>)</span></code></pre></div>
<p><img src="Using-PlotXTabs2_files/figure-html/simple2-1.png" width="672"></p>
</div>
<div id="example-scenario-what-makes-us-happy" class="section level2">
<h2 class="hasAnchor">
<a href="#example-scenario-what-makes-us-happy" class="anchor"></a>Example scenario … What makes us happy?</h2>
<p>The documentation examples use the <code>mtcars</code> and <code>HairEyeColor</code> built-in datasets. They are handy, convenient, and available by default. To demonstrate the function in action, however, I’m going to use a different dataset. Something that should allow you to better see the value of making plots of the crosstabs rather than simple tables. It also has the happy property of being much much larger than <code>mtcars</code> so we can see if there are lags in performance due to the number of rows.</p>
<p>Rather than provide my own or make anyone work too hard I selected that <code>happy</code> dataset that comes bundled with several <code>R</code> packages including <code>productplots</code> and <code>GGally</code>. From the description:</p>
<blockquote>
<p>The data is a small sample of variables related to happiness from the general social survey (GSS). The GSS is a yearly cross-sectional survey of Americans, run from 1976. We combine data for 25 years to yield 51,020 observations, and of the over 5,000 variables, we select nine related to happiness.</p>
</blockquote>
<p>We’ll load the library and take a quick look at the structure of the data.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co">#&gt; </span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co">#&gt; </span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co">#&gt;     filter, lag</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">#&gt; </span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(purrr)</span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(productplots)</span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(happy)</span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">#&gt; 'data.frame':    51020 obs. of  10 variables:</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="co">#&gt;  $ id     : num  1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co">#&gt;  $ happy  : Factor w/ 3 levels "not too happy",..: 1 1 2 1 2 2 1 1 2 2 ...</span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="co">#&gt;  $ year   : num  1972 1972 1972 1972 1972 ...</span></span>
<span id="cb3-17"><a href="#cb3-17"></a><span class="co">#&gt;  $ age    : num  23 70 48 27 61 26 28 27 21 30 ...</span></span>
<span id="cb3-18"><a href="#cb3-18"></a><span class="co">#&gt;  $ sex    : Factor w/ 2 levels "male","female": 2 1 2 2 2 1 1 1 2 2 ...</span></span>
<span id="cb3-19"><a href="#cb3-19"></a><span class="co">#&gt;  $ marital: Factor w/ 5 levels "married","never married",..: 2 1 1 1 1 2 3 2 2 1 ...</span></span>
<span id="cb3-20"><a href="#cb3-20"></a><span class="co">#&gt;  $ degree : Factor w/ 5 levels "lt high school",..: 4 1 2 4 2 2 2 4 2 2 ...</span></span>
<span id="cb3-21"><a href="#cb3-21"></a><span class="co">#&gt;  $ finrela: Factor w/ 5 levels "far below average",..: 3 4 3 3 4 4 4 3 3 2 ...</span></span>
<span id="cb3-22"><a href="#cb3-22"></a><span class="co">#&gt;  $ health : Factor w/ 4 levels "poor","fair",..: 3 2 4 3 3 3 4 3 4 2 ...</span></span>
<span id="cb3-23"><a href="#cb3-23"></a><span class="co">#&gt;  $ wtssall: num  0.445 0.889 0.889 0.889 0.889 ...</span></span></code></pre></div>
<p>We’ll be focusing on the non numeric variables. I certainly can’t claim to do a detailed analysis here but at least the questions will be fun I hope… Here’s the shortest possible call.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># who's happier by gender</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="kw"><a href="../reference/PlotXTabs2.html">PlotXTabs2</a></span>(happy,happy,sex)</span></code></pre></div>
<p><img src="Using-PlotXTabs2_files/figure-html/vignette1-1.png" width="672"></p>
<p>That’s useful, especially when you consider the variety of formatting options, but far more useful in my work flows when we make use of <code>purrr</code> <code>map</code> operators.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>myvariables &lt;-<span class="st"> </span>happy <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="st">                </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select_all.html">select_if</a></span>(is.factor)  <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="st">                </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="op">-</span>happy) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="st">                </span>names</span>
<span id="cb5-5"><a href="#cb5-5"></a>mytitles &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span>(<span class="st">"Happiness by "</span>, stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_title</a></span>(myvariables), <span class="st">" status"</span>)</span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a>myvariables</span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt; [1] "sex"     "marital" "degree"  "finrela" "health"</span></span>
<span id="cb5-9"><a href="#cb5-9"></a>mytitles</span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">#&gt; [1] "Happiness by Sex status"     "Happiness by Marital status"</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">#&gt; [3] "Happiness by Degree status"  "Happiness by Finrela status"</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">#&gt; [5] "Happiness by Health status"</span></span>
<span id="cb5-13"><a href="#cb5-13"></a></span>
<span id="cb5-14"><a href="#cb5-14"></a>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map2.html">map2</a></span>(<span class="dt">.x =</span> myvariables,</span>
<span id="cb5-15"><a href="#cb5-15"></a>            <span class="dt">.y =</span> mytitles,</span>
<span id="cb5-16"><a href="#cb5-16"></a>            <span class="dt">.f =</span>  <span class="op">~</span><span class="st"> </span><span class="kw"><a href="../reference/PlotXTabs2.html">PlotXTabs2</a></span>(<span class="dt">x =</span> .x,</span>
<span id="cb5-17"><a href="#cb5-17"></a>                               <span class="dt">title =</span> .y,</span>
<span id="cb5-18"><a href="#cb5-18"></a>                               <span class="dt">data =</span> happy,</span>
<span id="cb5-19"><a href="#cb5-19"></a>                               <span class="dt">y =</span> happy,</span>
<span id="cb5-20"><a href="#cb5-20"></a>                               <span class="dt">legend.title =</span> <span class="st">"Rating"</span>,</span>
<span id="cb5-21"><a href="#cb5-21"></a>                               <span class="dt">xlab =</span> stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_title</a></span>(.x),</span>
<span id="cb5-22"><a href="#cb5-22"></a>                               <span class="dt">ylab =</span> <span class="ot">NULL</span>,</span>
<span id="cb5-23"><a href="#cb5-23"></a>                               <span class="dt">perc.k =</span> <span class="dv">1</span>,</span>
<span id="cb5-24"><a href="#cb5-24"></a>                               <span class="dt">palette =</span> <span class="st">"Set2"</span></span>
<span id="cb5-25"><a href="#cb5-25"></a>                               )</span>
<span id="cb5-26"><a href="#cb5-26"></a>            )</span>
<span id="cb5-27"><a href="#cb5-27"></a><span class="co">#&gt; Note: Using an external vector in selections is ambiguous.</span></span>
<span id="cb5-28"><a href="#cb5-28"></a><span class="co">#&gt; ℹ Use `all_of(.x)` instead of `.x` to silence this message.</span></span>
<span id="cb5-29"><a href="#cb5-29"></a><span class="co">#&gt; ℹ See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</span></span>
<span id="cb5-30"><a href="#cb5-30"></a><span class="co">#&gt; This message is displayed once per session.</span></span>
<span id="cb5-31"><a href="#cb5-31"></a><span class="co">#&gt; [[1]]</span></span></code></pre></div>
<p><img src="Using-PlotXTabs2_files/figure-html/vignette2-1.png" width="672"></p>
<pre><code>#&gt; 
#&gt; [[2]]</code></pre>
<p><img src="Using-PlotXTabs2_files/figure-html/vignette2-2.png" width="672"></p>
<pre><code>#&gt; 
#&gt; [[3]]</code></pre>
<p><img src="Using-PlotXTabs2_files/figure-html/vignette2-3.png" width="672"></p>
<pre><code>#&gt; 
#&gt; [[4]]</code></pre>
<p><img src="Using-PlotXTabs2_files/figure-html/vignette2-4.png" width="672"></p>
<pre><code>#&gt; 
#&gt; [[5]]</code></pre>
<p><img src="Using-PlotXTabs2_files/figure-html/vignette2-5.png" width="672"></p>
<p>I hope you’ve found this useful. I am always open to comments, corrections and suggestions.</p>
<p>Chuck (ibecav at gmail dot com)</p>
<div id="license" class="section level3">
<h3 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h3>
<p><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a><br>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p>
<blockquote>
<p>“He who gives up [code] safety for [code] speed deserves neither.” (<a href="https://twitter.com/hadleywickham/status/504368538874703872">via</a>)</p>
</blockquote>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#important-considerations">Important considerations</a></li>
      <li><a href="#example-scenario-what-makes-us-happy">Example scenario … What makes us happy?</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Chuck Powell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>

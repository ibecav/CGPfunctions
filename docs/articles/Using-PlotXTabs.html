<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using PlotXTabs • CGPfunctions</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using PlotXTabs">
<meta property="og:description" content="CGPfunctions">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-117082388-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117082388-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CGPfunctions</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Using-Plot2WayANOVA.html">Using Plot2WayAnova</a>
    </li>
    <li>
      <a href="../articles/Using-PlotXTabs.html">Using PlotXTabs</a>
    </li>
    <li>
      <a href="../articles/Using-PlotXTabs2.html">Using PlotXTabs2</a>
    </li>
    <li>
      <a href="../articles/Using-chaid_table.html">Using chaid_table</a>
    </li>
    <li>
      <a href="../articles/Using-newggslopegraph.html">Using newggslopegraph</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ibecav/CGPfunctions/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Using-PlotXTabs_files/header-attrs-2.3/header-attrs.js"></script><script src="Using-PlotXTabs_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using PlotXTabs</h1>
                        <h4 class="author">Chuck Powell</h4>
            
            <h4 class="date">2020-07-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ibecav/CGPfunctions/blob/master/vignettes/Using-PlotXTabs.Rmd"><code>vignettes/Using-PlotXTabs.Rmd</code></a></small>
      <div class="hidden name"><code>Using-PlotXTabs.Rmd</code></div>

    </div>

    
    
<p>This function is designed to automate and make efficient a relatively common task in some branches of science. The task of cross tabulating and displaying certain types of variables. It makes use of <code>dplyr</code> and <code>ggplot2</code> to achieve those ends.</p>
<p>Imagine that you want to take two of the <code>mtcars</code> variables, for example <code>am</code> and <code>cyl</code>, and conduct a cross tabulation and then plot it. Since it’s the sort of thing I’m likely to do often seemed like a good candidate to write a function for. Then I decided that I might very well want the function to allow me to input more than two variables at a time. It would be very tedious to execute the command 25 times if I had 5 dependent variables and 5 independent variables and needed to fully cross them.</p>
<p>It provides visually appealing and sensibly labelled charts quickly and efficiently. It does some basic error checking and allows the user some choice as to exact style without having to know any underlying syntax or semantics.</p>
<div id="possible-cases" class="section level2">
<h2 class="hasAnchor">
<a href="#possible-cases" class="anchor"></a>Possible cases</h2>
<p>The function is designed to handle four possible scenarios.</p>
<p>Take the user’s input and parse it into one of four known possibilities and then take appropriate action. The possibilities are:</p>
<ol style="list-style-type: decimal">
<li>If both are <code>bare</code> variables and found in the dataframe immediately print the plot</li>
<li>At least one of the variables is <code>bare</code> and found in the dataframe (variable x) and the other is one or more column numbers (variable y)</li>
<li>At least one of the variables is <code>bare</code> and found in the dataframe (variable y) and the other is one or more column numbers (variable x)</li>
<li>Both the variables were passed to us as numbers. Could be one or more numbers for either variable.</li>
</ol>
</div>
<div id="example-scenario-what-makes-us-happy" class="section level2">
<h2 class="hasAnchor">
<a href="#example-scenario-what-makes-us-happy" class="anchor"></a>Example scenario … What makes us happy?</h2>
<p>The documentation examples use the <code>mtcars</code> built-in dataset. It’s handy, convenient, and it’s installed by default. To actually show the function in action, however, I’m going to use a different dataset. Something that should allow you to better see the value of making plots of the crosstabs rather than simple tables. It also has the happy property of being much much larger than <code>mtcars</code> so we can see if there are lags in performance due to the number of rows.</p>
<p>Rather than provide my own or make anyone work too hard I selected that <code>happy</code> dataset that comes bundled with several <code>R</code> packages including <code>productplots</code> and <code>GGally</code>. From the description:</p>
<blockquote>
<p>The data is a small sample of variables related to happiness from the general social survey (GSS). The GSS is a yearly cross-sectional survey of Americans, run from 1976. We combine data for 25 years to yield 51,020 observations, and of the over 5,000 variables, we select nine related to happiness.</p>
</blockquote>
<p>We’ll load the library and take a quick look at the structure of the data.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">productplots</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">happy</span>)
<span class="co">#&gt; 'data.frame':    51020 obs. of  10 variables:</span>
<span class="co">#&gt;  $ id     : num  1 2 3 4 5 6 7 8 9 10 ...</span>
<span class="co">#&gt;  $ happy  : Factor w/ 3 levels "not too happy",..: 1 1 2 1 2 2 1 1 2 2 ...</span>
<span class="co">#&gt;  $ year   : num  1972 1972 1972 1972 1972 ...</span>
<span class="co">#&gt;  $ age    : num  23 70 48 27 61 26 28 27 21 30 ...</span>
<span class="co">#&gt;  $ sex    : Factor w/ 2 levels "male","female": 2 1 2 2 2 1 1 1 2 2 ...</span>
<span class="co">#&gt;  $ marital: Factor w/ 5 levels "married","never married",..: 2 1 1 1 1 2 3 2 2 1 ...</span>
<span class="co">#&gt;  $ degree : Factor w/ 5 levels "lt high school",..: 4 1 2 4 2 2 2 4 2 2 ...</span>
<span class="co">#&gt;  $ finrela: Factor w/ 5 levels "far below average",..: 3 4 3 3 4 4 4 3 3 2 ...</span>
<span class="co">#&gt;  $ health : Factor w/ 4 levels "poor","fair",..: 3 2 4 3 3 3 4 3 4 2 ...</span>
<span class="co">#&gt;  $ wtssall: num  0.445 0.889 0.889 0.889 0.889 ...</span></pre></body></html></div>
<p>We’ll be focusing on the non numeric variables. I certainly can’t claim to do a detailed analysis here but at least the questions will be fun I hope…</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="co"># who's happier by gender</span>
<span class="fu"><a href="../reference/PlotXTabs.html">PlotXTabs</a></span>(<span class="no">happy</span>,<span class="no">happy</span>,<span class="no">sex</span>)
<span class="co">#&gt; Plotted dataset happy variables happy by sex</span></pre></body></html></div>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-1.png" width="576"></p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="co"># same thing using column numbers and a stacked bar</span>
<span class="fu"><a href="../reference/PlotXTabs.html">PlotXTabs</a></span>(<span class="no">happy</span>,<span class="fl">2</span>,<span class="fl">5</span>,<span class="st">"stack"</span>)
<span class="co">#&gt; Creating the variable pairings from dataframe happy</span>
<span class="co">#&gt; Plot #1 happy with sex</span>
<span class="co">#&gt; Plotting complete</span></pre></body></html></div>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-2.png" width="576"></p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="co"># happiness by a variety of possible factors as a percent</span>
<span class="fu"><a href="../reference/PlotXTabs.html">PlotXTabs</a></span>(<span class="no">happy</span>, <span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">5</span>:<span class="fl">9</span>), <span class="kw">plottype</span> <span class="kw">=</span> <span class="st">"percent"</span>)
<span class="co">#&gt; Creating the variable pairings from dataframe happy</span>
<span class="co">#&gt; Plot #1 happy with sex</span></pre></body></html></div>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-3.png" width="576"></p>
<pre><code>#&gt; Plot #2 happy with marital</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-4.png" width="576"></p>
<pre><code>#&gt; Plot #3 happy with degree</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-5.png" width="576"></p>
<pre><code>#&gt; Plot #4 happy with finrela</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-6.png" width="576"></p>
<pre><code>#&gt; Plot #5 happy with health
#&gt; Plotting complete</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-7.png" width="576"></p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="co"># turn the numbers around and change them up basically just showing all</span>
<span class="co"># the permutations</span>
<span class="fu"><a href="../reference/PlotXTabs.html">PlotXTabs</a></span>(<span class="no">happy</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>,<span class="fl">5</span>), <span class="fl">9</span>, <span class="kw">plottype</span> <span class="kw">=</span> <span class="st">"side"</span>)
<span class="co">#&gt; Creating the variable pairings from dataframe happy</span>
<span class="co">#&gt; Plot #1 happy with health</span></pre></body></html></div>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-8.png" width="576"></p>
<pre><code>#&gt; Plot #2 sex with health
#&gt; Plotting complete</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-9.png" width="576"></p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="../reference/PlotXTabs.html">PlotXTabs</a></span>(<span class="no">happy</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>,<span class="fl">5</span>), <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">6</span>:<span class="fl">9</span>), <span class="kw">plottype</span> <span class="kw">=</span> <span class="st">"percent"</span>)
<span class="co">#&gt; Creating the variable pairings from dataframe happy</span>
<span class="co">#&gt; Plot #1 happy with marital</span></pre></body></html></div>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-10.png" width="576"></p>
<pre><code>#&gt; Plot #2 happy with degree</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-11.png" width="576"></p>
<pre><code>#&gt; Plot #3 happy with finrela</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-12.png" width="576"></p>
<pre><code>#&gt; Plot #4 happy with health</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-13.png" width="576"></p>
<pre><code>#&gt; Plot #5 sex with marital</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-14.png" width="576"></p>
<pre><code>#&gt; Plot #6 sex with degree</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-15.png" width="576"></p>
<pre><code>#&gt; Plot #7 sex with finrela</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-16.png" width="576"></p>
<pre><code>#&gt; Plot #8 sex with health
#&gt; Plotting complete</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-17.png" width="576"></p>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="fu"><a href="../reference/PlotXTabs.html">PlotXTabs</a></span>(<span class="no">happy</span>, <span class="no">happy</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">6</span>,<span class="fl">7</span>,<span class="fl">9</span>), <span class="kw">plottype</span> <span class="kw">=</span> <span class="st">"percent"</span>)
<span class="co">#&gt; Creating the variable pairings from dataframe happy</span>
<span class="co">#&gt; Plot #1 happy with marital</span></pre></body></html></div>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-18.png" width="576"></p>
<pre><code>#&gt; Plot #2 happy with degree</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-19.png" width="576"></p>
<pre><code>#&gt; Plot #3 happy with health
#&gt; Plotting complete</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-20.png" width="576"></p>
<div class="sourceCode" id="cb22"><html><body><pre class="r"><span class="fu"><a href="../reference/PlotXTabs.html">PlotXTabs</a></span>(<span class="no">happy</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">6</span>,<span class="fl">7</span>,<span class="fl">9</span>), <span class="no">happy</span>, <span class="kw">plottype</span> <span class="kw">=</span> <span class="st">"percent"</span>)
<span class="co">#&gt; Creating the variable pairings from dataframe happy</span>
<span class="co">#&gt; Plot #1 marital with happy</span></pre></body></html></div>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-21.png" width="576"></p>
<pre><code>#&gt; Plot #2 degree with happy</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-22.png" width="576"></p>
<pre><code>#&gt; Plot #3 health with happy
#&gt; Plotting complete</code></pre>
<p><img src="Using-PlotXTabs_files/figure-html/vignette1-23.png" width="576"></p>
<p>I hope you’ve found this useful. I am always open to comments, corrections and suggestions.</p>
<p>Chuck (ibecav at gmail dot com)</p>
<div id="license" class="section level3">
<h3 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h3>
<p><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a><br>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p>
<blockquote>
<p>“He who gives up [code] safety for [code] speed deserves neither.” (<a href="https://twitter.com/hadleywickham/status/504368538874703872">via</a>)</p>
</blockquote>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Chuck Powell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>

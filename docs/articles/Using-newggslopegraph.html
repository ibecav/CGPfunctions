<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using newggslopegraph • CGPfunctions</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using newggslopegraph">
<meta property="og:description" content="CGPfunctions">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-117082388-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117082388-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CGPfunctions</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Using-Plot2WayANOVA.html">Using Plot2WayAnova</a>
    </li>
    <li>
      <a href="../articles/Using-PlotXTabs.html">Using PlotXTabs</a>
    </li>
    <li>
      <a href="../articles/Using-PlotXTabs2.html">Using PlotXTabs2</a>
    </li>
    <li>
      <a href="../articles/Using-chaid_table.html">Using chaid_table</a>
    </li>
    <li>
      <a href="../articles/Using-newggslopegraph.html">Using newggslopegraph</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ibecav/CGPfunctions/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Using-newggslopegraph_files/header-attrs-2.3/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using newggslopegraph</h1>
                        <h4 class="author">Chuck Powell</h4>
            
            <h4 class="date">2020-07-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ibecav/CGPfunctions/blob/master/vignettes/Using-newggslopegraph.Rmd"><code>vignettes/Using-newggslopegraph.Rmd</code></a></small>
      <div class="hidden name"><code>Using-newggslopegraph.Rmd</code></div>

    </div>

    
    
<p>This function is designed to automate the process of producing a <a href="https://www.edwardtufte.com/bboard/q-and-a-fetch-msg?msg_id=0003nk">Tufte style slopegraph</a> using <code>ggplot2</code>.</p>
<p>I’ve been aware of slopegraphs and bumpcharts for quite some time, and I certainly am aware of <a href="https://www.edwardtufte.com/tufte/">Tufte’s work</a>. As an amateur military historian I’ve always loved, for example, <a href="https://www.edwardtufte.com/tufte/posters">his poster</a> depicting Napoleon’s Russian Campaign. So when I saw the article from <a href="https://www.r-bloggers.com/author/murtaza-haider/">Murtaza Haider</a> titled <em>“Edward Tufte’s Slopegraphs and political fortunes in Ontario”</em> I just had to take a shot at writing a function.</p>
<p>To make it a little easier to get started with the function I have taken the liberty of providing the cancer data in a format where it is immediately usable. Please see <code><a href="../reference/newcancer.html">?newcancer</a></code>.</p>
<div id="installation-and-setup" class="section level2">
<h2 class="hasAnchor">
<a href="#installation-and-setup" class="anchor"></a>Installation and setup</h2>
<p>Long term I’ll try and ensure the version on <code>CRAN</code> is well maintained but for now you’re better served by grabbing the current version from GITHUB.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="no"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html">opts_chunk</a></span>$<span class="fu">set</span>(
  <span class="kw">collapse</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
  <span class="kw">comment</span> <span class="kw">=</span> <span class="st">"#&gt;"</span>
)
<span class="co"># Install from CRAN</span>
<span class="co"># install.packages("CGPfunctions")</span>

<span class="co"># Or the development version from GitHub</span>
<span class="co"># install.packages("devtools")</span>
<span class="co"># devtools::install_github("ibecav/CGPfunctions")</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">CGPfunctions</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)</pre></body></html></div>
<pre><code>## 
## Attaching package: 'dplyr'</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union</code></pre>
</div>
<div id="simple-examples" class="section level2">
<h2 class="hasAnchor">
<a href="#simple-examples" class="anchor"></a>Simple examples</h2>
<p>If you’re unfamiliar with slopegraphs or just want to see what the display is all about the dataset I’ve provided can get you started in one line</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="../reference/newggslopegraph.html">newggslopegraph</a></span>(<span class="no">newcancer</span>,<span class="no">Year</span>,<span class="no">Survival</span>,<span class="no">Type</span>)</pre></body></html></div>
<p><img src="Using-newggslopegraph_files/figure-html/ggslope1-1.png" width="672"></p>
<p>Optionally you can provide important label information through <code>Title</code>, <code>Subtitle</code>, and <code>Caption</code> arguments. You can suppress them all together by setting them <code>= NULL</code> but since I think they are very important the default is to gently remind you, that you have not provided any information. Let’s provide a title and sub-title but skip the caption.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="../reference/newggslopegraph.html">newggslopegraph</a></span>(<span class="kw">dataframe</span> <span class="kw">=</span> <span class="no">newcancer</span>,
                <span class="kw">Times</span> <span class="kw">=</span> <span class="no">Year</span>,
                <span class="kw">Measurement</span> <span class="kw">=</span> <span class="no">Survival</span>,
                <span class="kw">Grouping</span> <span class="kw">=</span> <span class="no">Type</span>,
                <span class="kw">Title</span> <span class="kw">=</span> <span class="st">"Estimates of Percent Survival Rates"</span>,
                <span class="kw">SubTitle</span> <span class="kw">=</span> <span class="st">"Based on: Edward Tufte, Beautiful Evidence, 174, 176."</span>,
                <span class="kw">Caption</span> <span class="kw">=</span> <span class="kw">NULL</span>
                )</pre></body></html></div>
<p><img src="Using-newggslopegraph_files/figure-html/ggslope2-1.png" width="672"></p>
</div>
<div id="how-it-all-works" class="section level2">
<h2 class="hasAnchor">
<a href="#how-it-all-works" class="anchor"></a>How it all works</h2>
<p>It’s all well and good to get the little demo to work, but it might be useful for you to understand how to extend it out to data you’re interested in.</p>
<p>You’ll need a dataframe with at least three columns. The function will do some basic error checking and complain if you don’t hit the essentials.</p>
<ol style="list-style-type: decimal">
<li>
<code>Times</code> is the column in the dataframe that corresponds to the x axis of the plot and is normally a set of moments in time expressed as either characters, factors or ordered factors (in our case <code>newcancer$Year</code>. If it is truly time series data (especially with a lot of dates you’re much better off using an R function purpose built for that). In <code>newcancer</code> it’s an ordered factor, mainly because if we fed the information in as character the sort order would be <code>Year 10, Year 15, Year 20, Year 5</code> which is very suboptimal. A command like <code>newcancer$Year &lt;- factor(newcancer$Year,levels = c("Year.5", "Year.10", "Year.15", "Year.20"), labels = c("5 Year","10 Year","15 Year","20 Year"), ordered = TRUE)</code> would be the way to force things they way you want them.</li>
<li>
<code>Measurement</code> is the column that has the actual numbers you want to display along the y axis. Frequently that’s a percentage but it could just as easily be any number. Watch out for scaling issues here you’ll want to ensure that its not disparate. In our case <code>newcancer$Survival</code> is the percentage of patients surviving at that point in time, so the maximum scale is 0 to 100.</li>
<li>
<code>Grouping</code> is what controls how many individual lines are portrayed. Every attempt is made to color them and label them in ways that lead to clarity but eventually you can have too many. In our example case the column is <code>newcancer$Type</code> for the type of cancer or location.</li>
</ol>
</div>
<div id="another-quick-example" class="section level2">
<h2 class="hasAnchor">
<a href="#another-quick-example" class="anchor"></a>Another quick example</h2>
<p>This is loosely based off a blog post from <a href="https://www.r-bloggers.com/author/murtaza-haider/">Murtaza Haider titled “Edward Tufte’s Slopegraphs and political fortunes in Ontario”</a> that led to my developing this function <a href="https://ibecav.github.io/slopegraph/">chronicled here</a>.</p>
<p>In this case we’re going to plot the percent of the vote captured by some Canadian political parties.</p>
<blockquote>
<p>The data is loosely based on real data but is not actually accurate.</p>
</blockquote>
<p><code>moredata$Date</code> is the hypothetical polling date as a factor (in this case <code>character</code> would work equally well). <code>moredata$Party</code> is the various political parties and <code>moredata$Pct</code> is the percentage of the vote they are estimated to have.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">moredata</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html">structure</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">Date</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html">structure</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1L</span>, <span class="fl">1L</span>, <span class="fl">1L</span>, <span class="fl">1L</span>, <span class="fl">1L</span>, <span class="fl">2L</span>, <span class="fl">2L</span>, <span class="fl">2L</span>, <span class="fl">2L</span>, <span class="fl">2L</span>, <span class="fl">3L</span>, <span class="fl">3L</span>, <span class="fl">3L</span>, <span class="fl">3L</span>, <span class="fl">3L</span>),
                                            <span class="kw">.Label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"11-May-18"</span>, <span class="st">"18-May-18"</span>, <span class="st">"25-May-18"</span>),
                                            <span class="kw">class</span> <span class="kw">=</span> <span class="st">"factor"</span>),
                           <span class="kw">Party</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html">structure</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">5L</span>, <span class="fl">3L</span>, <span class="fl">2L</span>, <span class="fl">1L</span>, <span class="fl">4L</span>, <span class="fl">5L</span>, <span class="fl">3L</span>, <span class="fl">2L</span>, <span class="fl">1L</span>, <span class="fl">4L</span>, <span class="fl">5L</span>, <span class="fl">3L</span>, <span class="fl">2L</span>, <span class="fl">1L</span>, <span class="fl">4L</span>),
                                             <span class="kw">.Label</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Green"</span>, <span class="st">"Liberal"</span>, <span class="st">"NDP"</span>, <span class="st">"Others"</span>, <span class="st">"PC"</span>),
                                             <span class="kw">class</span> <span class="kw">=</span> <span class="st">"factor"</span>),
                           <span class="kw">Pct</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">42.3</span>, <span class="fl">28.4</span>, <span class="fl">22.1</span>, <span class="fl">5.4</span>, <span class="fl">1.8</span>, <span class="fl">41.9</span>, <span class="fl">29.3</span>, <span class="fl">22.3</span>, <span class="fl">5</span>, <span class="fl">1.4</span>, <span class="fl">41.9</span>, <span class="fl">26.8</span>, <span class="fl">26.8</span>, <span class="fl">5</span>, <span class="fl">1.4</span>)),
                      <span class="kw">class</span> <span class="kw">=</span> <span class="st">"data.frame"</span>,
                      <span class="kw">row.names</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">NA</span>, -<span class="fl">15L</span>))
<span class="co">#tail(moredata)</span>
<span class="fu"><a href="../reference/newggslopegraph.html">newggslopegraph</a></span>(<span class="no">moredata</span>,<span class="no">Date</span>,<span class="no">Pct</span>,<span class="no">Party</span>, <span class="kw">Title</span> <span class="kw">=</span> <span class="st">"Notional data"</span>, <span class="kw">SubTitle</span> <span class="kw">=</span> <span class="kw">NULL</span>, <span class="kw">Caption</span> <span class="kw">=</span> <span class="kw">NULL</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; Converting 'Date' to an ordered factor</span></pre></body></html></div>
<p><img src="Using-newggslopegraph_files/figure-html/ggslope3-1.png" width="480"></p>
<p>There are a plethora of formatting options. See <code><a href="../reference/newggslopegraph.html">?newggslopegraph</a></code> for all of them. Here’s a few.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="../reference/newggslopegraph.html">newggslopegraph</a></span>(<span class="no">moredata</span>, <span class="no">Date</span>, <span class="no">Pct</span>, <span class="no">Party</span>,
                <span class="kw">Title</span> <span class="kw">=</span> <span class="st">"Notional data"</span>,
                <span class="kw">SubTitle</span> <span class="kw">=</span> <span class="st">"none"</span>,
                <span class="kw">Caption</span> <span class="kw">=</span> <span class="st">"imaginary"</span>,
                <span class="kw">LineColor</span> <span class="kw">=</span> <span class="st">"gray"</span>,
                <span class="kw">LineThickness</span> <span class="kw">=</span> <span class="fl">.5</span>,
                <span class="kw">YTextSize</span> <span class="kw">=</span> <span class="fl">4</span>
                )
<span class="co">#&gt; </span>
<span class="co">#&gt; Converting 'Date' to an ordered factor</span></pre></body></html></div>
<p><img src="Using-newggslopegraph_files/figure-html/ggslope4-1.png" width="480"></p>
<p>The most complex is <code>LineColor</code> where you can do the following if you want to highlight the difference between the Liberal and NDP parties while making the other three less prominent…</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="../reference/newggslopegraph.html">newggslopegraph</a></span>(<span class="no">moredata</span>, <span class="no">Date</span>, <span class="no">Pct</span>, <span class="no">Party</span>,
                <span class="kw">Title</span> <span class="kw">=</span> <span class="st">"Notional data"</span>,
                <span class="kw">SubTitle</span> <span class="kw">=</span> <span class="st">"none"</span>,
                <span class="kw">Caption</span> <span class="kw">=</span> <span class="st">"imaginary"</span>,
                <span class="kw">LineColor</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Green"</span> <span class="kw">=</span> <span class="st">"gray"</span>, <span class="st">"Liberal"</span> <span class="kw">=</span> <span class="st">"green"</span>, <span class="st">"NDP"</span> <span class="kw">=</span> <span class="st">"red"</span>, <span class="st">"Others"</span> <span class="kw">=</span> <span class="st">"gray"</span>, <span class="st">"PC"</span> <span class="kw">=</span> <span class="st">"gray"</span>),
                <span class="kw">LineThickness</span> <span class="kw">=</span> <span class="fl">.5</span>,
                <span class="kw">YTextSize</span> <span class="kw">=</span> <span class="fl">4</span>
                )
<span class="co">#&gt; </span>
<span class="co">#&gt; Converting 'Date' to an ordered factor</span></pre></body></html></div>
<p><img src="Using-newggslopegraph_files/figure-html/ggslope5-1.png" width="480"></p>
</div>
<div id="slopegraph-best-practices" class="section level2">
<h2 class="hasAnchor">
<a href="#slopegraph-best-practices" class="anchor"></a>Slopegraph Best Practices</h2>
<ol style="list-style-type: decimal">
<li>Scaling – this function plots to scale on an actual scale.</li>
<li>If the datapoints or labels are bunching up, expand the vertical size of the plot as necessary.</li>
<li>Names of the items on both the left-hand and right-hand axes are aligned, to make vertical scanning of the items’ names easier.</li>
<li>Many suggest using a thin, light gray line to connect the data. A too-heavy line is unnecessary and will make the chart harder to read.</li>
<li>When a chart features many slope intersections, judicious use of color can avoid what Ben Fry describes as the “pile of sticks” phenomenon (Visualizing Data, 121).</li>
<li>A table (with more statistical detail) might be a good complement to use alongside the slopegraph. As Tufte notes: “The data table and the slopegraph are colleagues in explanation not competitors. One display can serve some but not all functions.”</li>
</ol>
</div>
<div id="one-last-set-of-data" class="section level2">
<h2 class="hasAnchor">
<a href="#one-last-set-of-data" class="anchor"></a>One last set of data</h2>
<p>Also from Tufte, this is data about a select group of countries Gross Domestic Product (GDP). I’ll use it to show you a tricky way to highlight certain countries without making a named vector with <code>LineColor = c(rep("gray",3), "red", rep("gray",3), "red", rep("gray",10))</code> the excess vector entries are silently dropped… The bottom line is that <code>LineColor</code> is simply a character vector that you can fill any way you choose.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="../reference/newggslopegraph.html">newggslopegraph</a></span>(<span class="no">newgdp</span>,
                <span class="no">Year</span>,
                <span class="no">GDP</span>,
                <span class="no">Country</span>,
                <span class="kw">Title</span> <span class="kw">=</span> <span class="st">"Gross GDP"</span>,
                <span class="kw">SubTitle</span> <span class="kw">=</span> <span class="kw">NULL</span>,
                <span class="kw">Caption</span> <span class="kw">=</span> <span class="kw">NULL</span>,
                <span class="kw">LineThickness</span> <span class="kw">=</span> <span class="fl">.5</span>,
                <span class="kw">YTextSize</span> <span class="kw">=</span> <span class="fl">4</span>,
                <span class="kw">LineColor</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"gray"</span>,<span class="fl">3</span>), <span class="st">"red"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"gray"</span>,<span class="fl">3</span>), <span class="st">"red"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"gray"</span>,<span class="fl">10</span>))
                )</pre></body></html></div>
<p><img src="Using-newggslopegraph_files/figure-html/ggslope6-1.png" width="576"></p>
<p>Finally, let me take a moment about crowding and labeling. I’ve made every effort to try and deconflict the labels on the left and right axis (in this example the <code>Country</code>) and that should work automatically as you resize your plot dimensions. ** pro tip - if you use <code>RStudio</code> you can press the <code>zoom</code> icon and then use the rescaling of the window to see best choices **.</p>
<p>But the numbers (<code>GDP</code>) are a different matter and there’s no easy way to ensure separation in a case like this data. There’s a decent total spread from 57.4 to 20.7 and some really close measurements like France, Belgium, and Germany on the right side. My suggestion is in a case like this one you create a new column in your dataframe with two significant places. So specifically it would be <code>newgdp$rGDP &lt;- signif(newgdp$GDP, 2)</code>. In my testing, at least, I’ve found this helps without creating inaccuracy and not causing you to try and “stretch” vertically to disambiguate the numbers. This time I’ll also use <code>LineColor</code> to highlight how Canada, Finland and Belgium fare from 1970 to 1979.</p>
<p>Then to demonstrate how flexible <code>LineColor</code> really is I’ll use some <code>tidyverse</code> tools to build a named list of countries and colors. The country’s line color will be determined by whether the difference between 1979 is positive, near neutral or negative.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">newgdp</span>$<span class="no">rGDP</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">signif</a></span>(<span class="no">newgdp</span>$<span class="no">GDP</span>, <span class="fl">2</span>)
<span class="fu"><a href="../reference/newggslopegraph.html">newggslopegraph</a></span>(<span class="no">newgdp</span>,
                <span class="no">Year</span>,
                <span class="no">rGDP</span>,
                <span class="no">Country</span>,
                <span class="kw">Title</span> <span class="kw">=</span> <span class="st">"Gross GDP"</span>,
                <span class="kw">SubTitle</span> <span class="kw">=</span> <span class="kw">NULL</span>,
                <span class="kw">Caption</span> <span class="kw">=</span> <span class="kw">NULL</span>,
                <span class="kw">LineThickness</span> <span class="kw">=</span> <span class="fl">.5</span>,
                <span class="kw">YTextSize</span> <span class="kw">=</span> <span class="fl">4</span>,
                <span class="kw">LineColor</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"gray"</span>,<span class="fl">6</span>), <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"red"</span>,<span class="fl">2</span>), <span class="st">"red"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"gray"</span>,<span class="fl">10</span>))
                )</pre></body></html></div>
<p><img src="Using-newggslopegraph_files/figure-html/ggslope7-1.png" width="576"></p>
<div class="sourceCode" id="cb12"><html><body><pre class="r">
<span class="no">custom_colors</span> <span class="kw">&lt;-</span> <span class="kw pkg">tidyr</span><span class="kw ns">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span>(<span class="no">newgdp</span>,
                   <span class="kw">id_cols</span> <span class="kw">=</span> <span class="no">Country</span>,
                   <span class="kw">names_from</span> <span class="kw">=</span> <span class="no">Year</span>,
                   <span class="kw">values_from</span> <span class="kw">=</span> <span class="no">GDP</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">difference</span> <span class="kw">=</span> <span class="no">Year1979</span> - <span class="no">Year1970</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">trend</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span>(
    <span class="no">difference</span> <span class="kw">&gt;=</span> <span class="fl">2</span> ~ <span class="st">"green"</span>,
    <span class="no">difference</span> <span class="kw">&lt;=</span> -<span class="fl">1</span> ~ <span class="st">"red"</span>,
    <span class="fl">TRUE</span> ~ <span class="st">"gray"</span>
    )
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">Country</span>, <span class="no">trend</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">tibble</span><span class="kw ns">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/enframe.html">deframe</a></span>()

<span class="no">custom_colors</span>
<span class="co">#&gt;      Sweden Netherlands      Norway     Britain      France     Germany </span>
<span class="co">#&gt;     "green"     "green"     "green"       "red"     "green"     "green" </span>
<span class="co">#&gt;     Belgium      Canada     Finland       Italy          US      Greece </span>
<span class="co">#&gt;     "green"      "gray"     "green"     "green"     "green"     "green" </span>
<span class="co">#&gt; Switzerland       Spain       Japan </span>
<span class="co">#&gt;     "green"     "green"     "green"</span>

<span class="fu"><a href="../reference/newggslopegraph.html">newggslopegraph</a></span>(<span class="no">newgdp</span>,
                <span class="no">Year</span>,
                <span class="no">rGDP</span>,
                <span class="no">Country</span>,
                <span class="kw">Title</span> <span class="kw">=</span> <span class="st">"Gross GDP"</span>,
                <span class="kw">SubTitle</span> <span class="kw">=</span> <span class="kw">NULL</span>,
                <span class="kw">Caption</span> <span class="kw">=</span> <span class="kw">NULL</span>,
                <span class="kw">LineThickness</span> <span class="kw">=</span> <span class="fl">.5</span>,
                <span class="kw">YTextSize</span> <span class="kw">=</span> <span class="fl">4</span>,
                <span class="kw">LineColor</span> <span class="kw">=</span> <span class="no">custom_colors</span>
)</pre></body></html></div>
<p><img src="Using-newggslopegraph_files/figure-html/ggslope7-2.png" width="576"></p>
<div id="leaving-feedback" class="section level3">
<h3 class="hasAnchor">
<a href="#leaving-feedback" class="anchor"></a>Leaving Feedback</h3>
<p>If you like CGPfunctions, please consider Filing a GitHub issue by <a href="https://github.com/ibecav/CGPfunctions/issues">leaving feedback here</a>, or by contacting me at ibecav at gmail.com by email.</p>
</div>
<div id="license" class="section level3">
<h3 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h3>
<p><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a><br>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Chuck Powell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
